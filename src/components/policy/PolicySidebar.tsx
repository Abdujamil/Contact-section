import React from "react";
import styles from "@/app/page.module.scss";
import { PolicyTab } from "@/components/policy/PolicyPage";
import PolicyTabButton from "@/components/policy/PolicyTabButton";
import BlogAside from "../blogPageCard/blogAside";
import { policyData } from "@/data/policy";

interface PolicySidebarProps {
  activeTab: PolicyTab;
  setActiveTab: (tab: PolicyTab) => void;
}

const tabIdMap: Record<PolicyTab, number> = {
  policy: 1,
  offer: 2,
  license: 3,
};

const PolicySidebar: React.FC<PolicySidebarProps> = ({
  activeTab,
  setActiveTab,
}) => {
  const currentBlogItem = policyData.find(
    (item) => item.id === tabIdMap[activeTab]
  );

  const tabs = [
    {
      id: "policy" as PolicyTab,
      label: "Политика",
      icon: (
        <svg viewBox="0 0 25 28" xmlns="http://www.w3.org/2000/svg">
          <path d="M14.1577 0.699219V7.89922C14.1577 8.53574 14.4196 9.14619 14.8857 9.59628C15.3519 10.0464 15.9841 10.2992 16.6433 10.2992H24.1003V23.8992C24.1003 24.5357 23.8384 25.1462 23.3722 25.5963C22.9061 26.0464 22.2739 26.2992 21.6146 26.2992H14.1577V19.8992C14.1579 19.1897 13.9138 18.5002 13.4638 17.9391C13.0139 17.3781 12.3836 16.9774 11.672 16.8V16.6992C11.6723 15.8565 11.4428 15.0286 11.0066 14.2987C10.5704 13.5688 9.94282 12.9627 9.18704 12.5412C8.43126 12.1197 7.57389 11.8978 6.70111 11.8977C5.82834 11.8977 4.97092 12.1195 4.21508 12.5408V3.09922C4.21508 2.4627 4.47696 1.85225 4.94311 1.40216C5.40926 0.952075 6.04149 0.699219 6.70073 0.699219H14.1577ZM15.8148 1.09922V7.89922C15.8148 8.11139 15.9021 8.31488 16.0575 8.4649C16.2128 8.61493 16.4236 8.69922 16.6433 8.69922H23.686L15.8148 1.09922ZM3.38653 16.6992V18.2992H2.55798C2.11849 18.2992 1.697 18.4678 1.38623 18.7678C1.07547 19.0679 0.900879 19.4749 0.900879 19.8992V26.2992C0.900879 26.7236 1.07547 27.1305 1.38623 27.4306C1.697 27.7306 2.11849 27.8992 2.55798 27.8992H10.8435C11.283 27.8992 11.7045 27.7306 12.0152 27.4306C12.326 27.1305 12.5006 26.7236 12.5006 26.2992V19.8992C12.5006 19.4749 12.326 19.0679 12.0152 18.7678C11.7045 18.4678 11.283 18.2992 10.8435 18.2992H10.0149V16.6992C10.0149 15.8505 9.66575 15.0366 9.04422 14.4365C8.42269 13.8364 7.57971 13.4992 6.70073 13.4992C5.82175 13.4992 4.97877 13.8364 4.35723 14.4365C3.7357 15.0366 3.38653 15.8505 3.38653 16.6992ZM5.04363 18.2992V16.6992C5.04363 16.2749 5.21822 15.8679 5.52898 15.5678C5.83975 15.2678 6.26124 15.0992 6.70073 15.0992C7.14022 15.0992 7.56171 15.2678 7.87247 15.5678C8.18324 15.8679 8.35783 16.2749 8.35783 16.6992V18.2992H5.04363ZM6.70073 21.8992C7.03035 21.8992 7.34646 22.0256 7.57954 22.2507C7.81261 22.4757 7.94355 22.781 7.94355 23.0992C7.94355 23.4175 7.81261 23.7227 7.57954 23.9477C7.34646 24.1728 7.03035 24.2992 6.70073 24.2992C6.37111 24.2992 6.05499 24.1728 5.82192 23.9477C5.58884 23.7227 5.4579 23.4175 5.4579 23.0992C5.4579 22.781 5.58884 22.4757 5.82192 22.2507C6.05499 22.0256 6.37111 21.8992 6.70073 21.8992Z" />
        </svg>
      ),
      viewBox: "0 0 25 28",
    },
    {
      id: "offer" as PolicyTab,
      label: "Оферта",
      icon: (
        <svg className={`!w-[27px]`} viewBox="0 0 23 28" xmlns="http://www.w3.org/2000/svg">
          <path d="M14.8654 0.544922V7.32429C14.8654 8.09486 15.1541 8.83387 15.668 9.37874C16.1819 9.92362 16.879 10.2297 17.6058 10.2297H24V24.7569C24 25.5275 23.7113 26.2665 23.1974 26.8114C22.6834 27.3563 21.9864 27.6624 21.2596 27.6624H9.4787C10.2974 27.3138 11.0394 26.7898 11.6584 26.1232C12.2774 25.4566 12.7599 24.6618 13.0759 23.7885C13.6816 23.7885 14.2624 23.5334 14.6907 23.0793C15.119 22.6252 15.3596 22.0094 15.3596 21.3673C15.3596 20.7251 15.119 20.1093 14.6907 19.6552C14.2624 19.2011 13.6816 18.9461 13.0759 18.9461C12.7538 18.0559 12.2587 17.2476 11.6227 16.5735C10.9868 15.8994 10.2243 15.3747 9.38462 15.0334C9.38462 14.3912 9.14402 13.7754 8.71575 13.3213C8.28748 12.8673 7.70662 12.6122 7.10096 12.6122C6.4953 12.6122 5.91444 12.8673 5.48617 13.3213C5.05791 13.7754 4.81731 14.3912 4.81731 15.0334C4.50181 15.1612 4.19637 15.3154 3.90385 15.4944V3.45036C3.90385 2.67979 4.19256 1.94078 4.70649 1.39591C5.22041 0.85103 5.91744 0.544922 6.64423 0.544922H14.8654ZM16.6923 0.658234V7.32429C16.6923 7.58114 16.7885 7.82748 16.9599 8.00911C17.1312 8.19073 17.3635 8.29277 17.6058 8.29277H23.8931C23.7649 7.81957 23.5254 7.38867 23.1971 7.04052L17.8734 1.39718C17.5451 1.04871 17.1387 0.794435 16.6923 0.658234ZM8.01442 15.0721C8.01442 14.8153 7.91818 14.5689 7.74688 14.3873C7.57557 14.2057 7.34323 14.1037 7.10096 14.1037C6.8587 14.1037 6.62635 14.2057 6.45505 14.3873C6.28374 14.5689 6.1875 14.8153 6.1875 15.0721V16.1278C5.18768 16.3249 4.26762 16.8384 3.54852 17.6008C2.82942 18.3633 2.34502 19.3387 2.15913 20.3988H1.16346C0.921196 20.3988 0.688854 20.5008 0.517547 20.6824C0.346239 20.8641 0.25 21.1104 0.25 21.3673C0.25 21.6241 0.346239 21.8704 0.517547 22.0521C0.688854 22.2337 0.921196 22.3357 1.16346 22.3357H2.15913C2.34502 23.3958 2.82942 24.3713 3.54852 25.1337C4.26762 25.8961 5.18768 26.4096 6.1875 26.6067V27.6624C6.1875 27.9192 6.28374 28.1656 6.45505 28.3472C6.62635 28.5288 6.8587 28.6309 7.10096 28.6309C7.34323 28.6309 7.57557 28.5288 7.74688 28.3472C7.91818 28.1656 8.01442 27.9192 8.01442 27.6624V26.6067C9.01425 26.4096 9.93431 25.8961 10.6534 25.1337C11.3725 24.3713 11.8569 23.3958 12.0428 22.3357H13.0385C13.2807 22.3357 13.5131 22.2337 13.6844 22.0521C13.8557 21.8704 13.9519 21.6241 13.9519 21.3673C13.9519 21.1104 13.8557 20.8641 13.6844 20.6824C13.5131 20.5008 13.2807 20.3988 13.0385 20.3988H12.0428C11.8569 19.3387 11.3725 18.3633 10.6534 17.6008C9.93431 16.8384 9.01425 16.3249 8.01442 16.1278V15.0721ZM3.90385 21.3673C3.90385 20.4683 4.24068 19.6061 4.84026 18.9704C5.43984 18.3347 6.25303 17.9776 7.10096 17.9776C7.94889 17.9776 8.76209 18.3347 9.36166 18.9704C9.96124 19.6061 10.2981 20.4683 10.2981 21.3673C10.2981 22.2663 9.96124 23.1284 9.36166 23.7641C8.76209 24.3998 7.94889 24.7569 7.10096 24.7569C6.25303 24.7569 5.43984 24.3998 4.84026 23.7641C4.24068 23.1284 3.90385 22.2663 3.90385 21.3673ZM8.47115 21.3673C8.47115 21.7525 8.3268 22.122 8.06983 22.3945C7.81287 22.6669 7.46436 22.82 7.10096 22.82C6.73756 22.82 6.38905 22.6669 6.13209 22.3945C5.87513 22.122 5.73077 21.7525 5.73077 21.3673C5.73077 20.982 5.87513 20.6125 6.13209 20.34C6.38905 20.0676 6.73756 19.9145 7.10096 19.9145C7.46436 19.9145 7.81287 20.0676 8.06983 20.34C8.3268 20.6125 8.47115 20.982 8.47115 21.3673Z" />
        </svg>
      ),
      viewBox: "0 0 24 29",
    },
    {
      id: "license" as PolicyTab,
      label: "Лицензии",
      icon: (
          <svg width="23" height="28" viewBox="0 0 23 28" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M13.0002 0.700195V7.9002C13.0002 8.53671 13.2531 9.14716 13.7031 9.59725C14.1532 10.0473 14.7637 10.3002 15.4002 10.3002H22.6002V23.9002C22.6002 24.5367 22.3473 25.1472 21.8973 25.5972C21.4472 26.0473 20.8367 26.3002 20.2002 26.3002H9.8002V22.5322C10.707 21.5051 11.2602 20.2142 11.3786 18.8493C11.4969 17.4843 11.1742 16.1174 10.4577 14.9496C9.74127 13.7818 8.66897 12.8747 7.39855 12.3618C6.12812 11.8489 4.72663 11.7572 3.4002 12.1002V3.1002C3.4002 2.46368 3.65305 1.85323 4.10314 1.40314C4.55323 0.953052 5.16368 0.700195 5.8002 0.700195H13.0002ZM14.6002 1.1002V7.9002C14.6002 8.11237 14.6845 8.31585 14.8345 8.46588C14.9845 8.61591 15.188 8.70019 15.4002 8.70019H22.2002L14.6002 1.1002ZM9.8002 18.3002C9.8002 19.5732 9.29448 20.7941 8.39431 21.6943C7.49413 22.5945 6.27323 23.1002 5.0002 23.1002C3.72716 23.1002 2.50626 22.5945 1.60608 21.6943C0.705908 20.7941 0.200195 19.5732 0.200195 18.3002C0.200195 17.0272 0.705908 15.8063 1.60608 14.9061C2.50626 14.0059 3.72716 13.5002 5.0002 13.5002C6.27323 13.5002 7.49413 14.0059 8.39431 14.9061C9.29448 15.8063 9.8002 17.0272 9.8002 18.3002ZM8.2002 23.8426C7.22729 24.4044 6.12364 24.7001 5.0002 24.7002C3.87689 24.7006 2.77326 24.4054 1.8002 23.8442V27.5018C1.80012 27.5725 1.8188 27.642 1.85433 27.7031C1.88986 27.7643 1.94096 27.8149 2.00243 27.8499C2.06391 27.8849 2.13355 27.9029 2.20427 27.9022C2.27498 27.9015 2.34425 27.882 2.405 27.8458L5.0002 26.2986L7.5954 27.8442C7.65614 27.8804 7.72541 27.8999 7.79612 27.9006C7.86684 27.9013 7.93648 27.8833 7.99796 27.8483C8.05943 27.8133 8.11053 27.7627 8.14606 27.7015C8.18159 27.6404 8.20027 27.5709 8.2002 27.5002V23.8426Z" fill="#ADADAD"/>
          </svg>
      ),
      viewBox: "0 0 24 27",
    },
  ];

  return (
    <aside className="sticky top-[80px] h-fit z-[10] w-[260px]">
      <div
        className={`${styles.btns} ${styles.licenseBtns} mb-[20px] flex flex-col items-start justify-start w-full max-w-[260px] p-[20px] gap-[12px] bg-[rgba(0, 0, 0, 0.07)] border border-[#353535] rounded-[6px]`}
      >
        {tabs.map((tab) => (
          <PolicyTabButton
            key={tab.id}
            tab={tab}
            isActive={activeTab === tab.id}
            onClick={() => setActiveTab(tab.id)}
          />
        ))}
      </div>

      <div className={`mb-25`}>
        <BlogAside items={currentBlogItem?.aside ?? []} />
      </div>
    </aside>
  );
};

export default PolicySidebar;
